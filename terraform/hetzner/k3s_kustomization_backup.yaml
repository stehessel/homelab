"apiVersion": "kustomize.config.k8s.io/v1beta1"
"kind": "Kustomization"
"patchesStrategicMerge":
- |
  apiVersion: apps/v1
  kind: DaemonSet
  metadata:
    name: kured
    namespace: kube-system
  spec:
    selector:
      matchLabels:
        name: kured
    template:
      metadata:
        labels:
          name: kured
      spec:
        serviceAccountName: kured
        containers:
          - name: kured
            command:
              - /usr/bin/kured
              - --reboot-command=/usr/bin/systemctl reboot
              - --pre-reboot-node-labels=kured=rebooting
- |
  apiVersion: apps/v1
  kind: Deployment
  metadata:
    name: system-upgrade-controller
    namespace: system-upgrade
  spec:
    template:
      spec:
        containers:
          - name: system-upgrade-controller
            volumeMounts:
              - name: ca-certificates
                mountPath: /var/lib/ca-certificates
        volumes:
          - name: ca-certificates
            hostPath:
              path: /var/lib/ca-certificates
              type: Directory
- "ccm.yaml"
"resources":
- "https://github.com/hetznercloud/hcloud-cloud-controller-manager/releases/download/v1.13.2/ccm-networks.yaml"
- "https://github.com/weaveworks/kured/releases/download/1.11.0/kured-1.11.0-dockerhub.yaml"
- "https://raw.githubusercontent.com/rancher/system-upgrade-controller/master/manifests/system-upgrade-controller.yaml"
- "https://raw.githubusercontent.com/hetznercloud/csi-driver/v1.6.0/deploy/kubernetes/hcloud-csi.yml"
- "traefik_config.yaml"
- "longhorn.yaml"
